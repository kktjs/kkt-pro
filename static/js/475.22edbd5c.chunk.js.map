{"version":3,"file":"static/js/475.22edbd5c.chunk.js","mappings":"8GACA,WACIA,WAAY,CAAG,EACfC,KAAM,CAAC,EACPC,OAAQ,qn7C","sources":["../../packages/query/README.md"],"sourcesContent":["\nexport default {\n    components: {  },\n    data: {},\n    source: \"API è¯·æ±‚\\n===\\n\\n`kktprc` é…ç½® `queryClient`å¼€å¯ã€‚ `@kkt/request` å†…ç½®äº† `react-query`ï¼ˆå’Œ [`@tanstack/react-query`](https://npmjs.com/@tanstack/react-query)<!--rehype:target=__blank--> æ˜¯åŒä¸€ä¸ªï¼‰è¯·æ±‚æ–¹æ¡ˆã€‚æ›´å¤š API æ–¹æ³•è¯·æŸ¥çœ‹ [react-query å®˜æ–¹æ–‡æ¡£](https://tanstack.com/query/latest)ã€‚\\n\\n## `kktp`é…ç½®æ–‡ä»¶\\n\\n```ts\\n// .kktprc.ts\\nexport default {\\n  queryClient: true\\n}\\n```\\n\\n\\n```js\\nimport { useReactQuery, useReactMutation, queryClient, fetchFn } from '@kkt/request';\\n// OR\\nimport { useReactQuery, useReactMutation, queryClient, fetchFn } from '@kkt/pro';\\n```\\n\\n## API æ¯”è¾ƒè¯´æ˜\\n\\n &nbsp; | `useReactQuery` | ~~`useQuery`~~ |  `useReactMutation` | ~~`useMutation`~~\\n:--- | :--- | :--- | :--- | :---\\nè¯´æ˜ | åŸºäº `useQuery` å°è£… | å®˜æ–¹ API | åŸºäº `useMutation` å°è£… | å®˜æ–¹ API\\næ‹¼æ¥å‰ç¼€ | âœ… | ğŸ›‘ | âœ… | ğŸ›‘\\né›†æˆ fetch å‡½æ•° | âœ… | ğŸ›‘ | âœ… | ğŸ›‘\\næ·»åŠ å¤´ä¿¡æ¯ | âœ… | ğŸ›‘ | âœ… | ğŸ›‘\\nmethod | âœ… é»˜è®¤(GET) | ğŸ›‘ | âœ… é»˜è®¤(POST) | ğŸ›‘\\nè¯·æ±‚è‡ªåŠ¨å¸¦ token | âœ… | ğŸ›‘ | âœ… | ğŸ›‘\\nè‡ªåŠ¨æ›´æ–° token | âœ… | ğŸ›‘ | âœ… | ğŸ›‘\\nBody è‡ªåŠ¨è½¬æ¢ | âœ… | ğŸ›‘ | âœ… | ğŸ›‘\\n\\næ¨èä½¿ç”¨æˆ‘ä»¬äºŒæ¬¡å°åŒ…çš„ APIï¼Œå¦åˆ™æ‚¨éœ€è¦é›†æˆä¸Šè¿°åŠŸèƒ½\\n\\n- [ ] è¯·æ±‚è‡ªåŠ¨å¸¦ token\\n- [ ] è‡ªåŠ¨æ›´æ–° token\\n\\n## API è¯·æ±‚ hooks\\n\\nä¸‹é¢æ˜¯ API è¯·æ±‚ç¤ºä¾‹ï¼Œå¦‚ GET/POST è¯·æ±‚ç¤ºä¾‹\\n\\n### useReactQuery\\n\\nä¸»è¦ç”¨äº**é»˜è®¤**è§¦å‘è¯·æ±‚æ•°æ®ï¼Œé»˜è®¤ `GET` è¯·æ±‚ï¼Œå˜æ›´ä½¿ç”¨ `method=\\\"POST\\\"` å‚æ•°é…ç½®\\n\\n```jsx\\nuseReactQuery({ \\n  queryKey: ['user', userId], \\n  url: `/api/user/list?id=${userId}`\\n});\\n```\\n<!--rehype:style=background:#00de2247;border: 0;-->\\n\\nğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘† ä¸Šé¢æ˜¯**æ¨è**ä½¿ç”¨ ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†\\n\\n```jsx\\nimport { fetchFn, useReactQuery } from '@kkt/request';\\n\\nuseReactQuery({ queryKey: ['user'], url: '/api/user/list' });\\nuseReactQuery({ queryKey: ['user'], url: '/api/user/list', method: 'POST' });\\nuseReactQuery({ queryKey: ['user', userId], queryFn: () => fetchFn(`/api/user/list?id=${userId}`) });\\nuseReactQuery({\\n  queryKey: ['user', userId],\\n  queryFn: async () => {\\n    return fetchFn(`/api/user/list?id=${userId}`);\\n  },\\n});\\nuseReactQuery({\\n  queryKey: ['user', userId],\\n  queryFn: ({ queryKey }) => fetchFn(`/api/user/list?id=${queryKey[1]}`);,\\n});\\nuseReactQuery({\\n  queryKey: ['user'],\\n  url: '/api/user/list',\\n  initialData: [....],\\n});\\n\\nconst { isInitialLoading, isError, data, error, refetch, isFetching } = useQuery(...)\\n```\\n\\nç¤ºä¾‹\\n\\n```javascript\\nimport { useReactQuery } from '@kkt/request';\\n\\nexport default function HomePage() {\\n  const { isLoading, isError, data } = useReactQuery({\\n    url: `/api/user/list`,\\n    queryKey: ['user-list'],\\n  });\\n\\n  return (\\n    <div>\\n      <p className=\\\"title\\\">ANEM x react-query</p>\\n      {isError && <p>è¯·æ±‚ API é”™è¯¯ ...</p>}\\n      {isLoading && <p>Loading ...</p>}\\n      {data && <p>ANEM ç°åœ¨æœ‰ {data.stargazers_count} é¢—æ˜Ÿï¼</p>}\\n    </div>\\n  );\\n}\\n```\\n\\n#### Query é€‰é¡¹\\n\\nå¯é€‰é€‰é¡¹ï¼Œè¯·æ±‚çš„æ•°æ®è¿›è¡Œå¤„ç†ç­‰å…¶å®ƒå¸¸ç”¨[é€‰é¡¹](https://tanstack.com/query/v4/docs/react/reference/useQuery)ï¼Œå¯ä»¥ç”¨äºé»˜è®¤å…¨å±€é…ç½® `QueryClientConfig` çš„è®¾ç½®ã€‚\\n\\n> æ³¨æ„ï¼š`.anerc.js` é»˜è®¤å·²ç»åœ¨ `QueryClientConfig` ä¸­é»˜è®¤å…¨å±€é…ç½®ï¼Œå¯ä»¥è¿›è¡Œå¢åŠ é…ç½®ï¼Œé…ç½® `react-query=false` å–æ¶ˆæ³¨é”€å…¨å±€ `QueryClient`ï¼Œå¯ä»¥è‡ªå·±æ³¨å†Œ `QueryClient`\\n\\n```js\\nconst { data } = useReactQuery({\\n  /** è®¾ç½® Content-Typeï¼Œé»˜è®¤å€¼ `json`ï¼Œ'Content-Type' = 'application/json' */\\n  contentType: \\\"json\\\" | 'form';\\n  // è¯·æ±‚ API\\n  url: '/api/user/list'\\n  // ç”¨äºæ­¤æŸ¥è¯¢çš„æŸ¥è¯¢é”®ã€‚æŸ¥è¯¢é”®å°†è¢« hash æˆä¸€ä¸ªç¨³å®šçš„ hash ã€‚å½“æ­¤é”®æ›´æ”¹æ—¶ï¼ŒæŸ¥è¯¢å°†è‡ªåŠ¨æ›´æ–°ï¼ˆåªè¦ enabled æœªè®¾ç½®ä¸º falseï¼‰\\n  queryKey: ['user-list', userId],\\n  // åªè¦æŸ¥è¯¢æˆåŠŸè·å–æ–°æ•°æ®ï¼Œæ­¤å‡½æ•°å°±ä¼šè§¦å‘ã€‚\\n  onSuccess: (data: TData) => void\\n  // å¦‚æœæŸ¥è¯¢é‡åˆ°é”™è¯¯å¹¶å°†ä¼ é€’é”™è¯¯ï¼Œåˆ™æ­¤å‡½æ•°å°†è§¦å‘ã€‚\\n  onError: (error: TError) => void\\n  // æ¯å½“æˆåŠŸè·å–æŸ¥è¯¢æˆ–å‡ºé”™å¹¶ä¼ é€’æ•°æ®æˆ–é”™è¯¯æ—¶ï¼Œæ­¤å‡½æ•°éƒ½ä¼šè§¦å‘ã€‚\\n  onSettled: (data?: TData, error?: TError) => void\\n  // æ­¤é€‰é¡¹å¯ç”¨äºè½¬æ¢æˆ–é€‰æ‹©æŸ¥è¯¢å‡½æ•°è¿”å›çš„éƒ¨åˆ†æ•°æ®ã€‚ å®ƒä¼šå½±å“è¿”å›çš„æ•°æ®å€¼ï¼Œä½†ä¸ä¼šå½±å“å­˜å‚¨åœ¨æŸ¥è¯¢ç¼“å­˜ä¸­çš„å†…å®¹ã€‚\\n  select: (data: TData) => unknown\\n  select: (dt) => {\\n    // æ”¹å˜è¯·æ±‚åˆ°çš„ data æ•°æ®ï¼Œè¿”å›éƒ¨åˆ† data æ•°æ®\\n    return dt\\n  },\\n  // å°†æ­¤è®¾ç½®ä¸º true ä»¥å¯ç”¨æš‚åœæ¨¡å¼ã€‚\\n  // å½“ true æ—¶ï¼ŒuseQuery å°†åœ¨ status === 'loading' æ—¶æš‚åœ\\n  // å½“ true æ—¶ï¼ŒuseQuery å°†åœ¨ status === 'error' æ—¶æŠ›å‡ºè¿è¡Œæ—¶é”™è¯¯\\n  suspense: true,\\n  // å°†æ­¤è®¾ç½®ä¸º false ä»¥ç¦æ­¢æ­¤æŸ¥è¯¢è‡ªåŠ¨è¿è¡Œã€‚https://tanstack.com/query/v4/docs/react/guides/dependent-queries\\n  // åœ¨ userId å­˜åœ¨ä¹‹å‰ï¼ŒæŸ¥è¯¢ä¸ä¼šæ‰§è¡Œ\\n  enabled: !!userId,\\n  // å¦‚æœä¸º falseï¼Œå¤±è´¥çš„æŸ¥è¯¢é»˜è®¤ä¸ä¼šé‡è¯•ã€‚å¦‚æœä¸ºçœŸï¼Œå¤±è´¥çš„æŸ¥è¯¢å°†æ— é™é‡è¯•\\n  // å¦‚æœè®¾ç½®ä¸ºæ•°å­—ï¼Œä¾‹å¦‚ 3ã€å¤±è´¥çš„æŸ¥è¯¢ä¼šé‡è¯•ï¼Œç›´åˆ°å¤±è´¥çš„æŸ¥è¯¢è®¡æ•°æ»¡è¶³é‚£ä¸ªæ•°\\n  retry: boolean | number | (failureCount: number, error: TError) => boolean\\n  // é»˜è®¤å€¼ä¸º 'online'ï¼Œè¯·å‚é˜…ç½‘ç»œæ¨¡å¼ï¼šhttps://tanstack.com/query/v4/docs/react/guides/network-mode\\n  networkMode: 'online' | 'always' | 'offlineFirst'\\n  // å¦‚æœè®¾ç½®ä¸º falseï¼Œå¦‚æœæŸ¥è¯¢åŒ…å«é”™è¯¯ï¼Œåˆ™ä¸ä¼šåœ¨æŒ‚è½½æ—¶é‡è¯•ã€‚é»˜è®¤ä¸ºçœŸ\\n  retryOnMount: boolean\\n  // æ­¤å‡½æ•°æ¥æ”¶ä¸€ä¸ª retryAttempt æ•´æ•°å’Œå®é™…é”™è¯¯ï¼Œå¹¶è¿”å›åœ¨ä¸‹ä¸€æ¬¡å°è¯•ä¹‹å‰åº”ç”¨çš„å»¶è¿Ÿï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰\\n  // åƒ attempt => Math.min(attempt > 1 ? 2 ** attempt * 1000 : 1000, 30 * 1000) è¿™æ ·çš„å‡½æ•°åº”ç”¨æŒ‡æ•°é€€é¿\\n  // åƒ attempt => attempt * 1000 è¿™æ ·çš„å‡½æ•°åº”ç”¨çº¿æ€§é€€é¿ã€‚\\n  retryDelay: number | (retryAttempt: number, error: TError) => number\\n  // é»˜è®¤å€¼ä¸º 0ï¼Œæ•°æ®è¢«è®¤ä¸ºè¿‡æ—¶åçš„æ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚è¯¥å€¼ä»…é€‚ç”¨äºå®šä¹‰å®ƒçš„æŒ‚é’©\\n  // å¦‚æœè®¾ç½®ä¸ºâ€œInfinityâ€ï¼Œæ•°æ®å°†æ°¸è¿œä¸ä¼šè¢«è®¤ä¸ºæ˜¯é™ˆæ—§çš„\\n  staleTime: number | Infinity\\n  // åœ¨ SSR æœŸé—´é»˜è®¤ä¸º 5 * 60 * 1000ï¼ˆ5 åˆ†é’Ÿï¼‰æˆ–æ— é™\\n  // æœªä½¿ç”¨(unused)/éæ´»åŠ¨(inactive)ç¼“å­˜æ•°æ®ä¿ç•™åœ¨å†…å­˜ä¸­çš„æ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚å½“æŸ¥è¯¢çš„ç¼“å­˜å˜ä¸ºæœªä½¿ç”¨æˆ–ä¸æ´»åŠ¨æ—¶ï¼Œè¯¥ç¼“å­˜æ•°æ®å°†åœ¨è¿™æ®µæ—¶é—´åè¢«åƒåœ¾æ”¶é›†ã€‚ å½“æŒ‡å®šä¸åŒçš„ç¼“å­˜æ—¶é—´æ—¶ï¼Œå°†ä½¿ç”¨æœ€é•¿çš„ä¸€ä¸ª\\n  // å¦‚æœè®¾ç½®ä¸º Infinityï¼Œå°†ç¦ç”¨åƒåœ¾æ”¶é›†\\n  cacheTime: number | Infinity\\n  // å¦‚æœè®¾ç½®ä¸ºä¸€ä¸ªæ•°å­—ï¼Œæ‰€æœ‰æŸ¥è¯¢å°†ä»¥æ¯«ç§’ä¸ºå•ä½ä»¥è¯¥é¢‘ç‡è¿ç»­é‡æ–°è·å–\\n  // å¦‚æœè®¾ç½®ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å°†ä½¿ç”¨æœ€æ–°çš„æ•°æ®æ‰§è¡Œå¹¶æŸ¥è¯¢ä»¥è®¡ç®—é¢‘ç‡\\n  refetchInterval: number | false | ((data: TData | undefined, query: Query) => number | false)\\n  // å¦‚æœè®¾ç½®ä¸º trueï¼Œåˆ™è®¾ç½®ä¸ºä½¿ç”¨ refetchInterval è¿ç»­é‡æ–°è·å–çš„æŸ¥è¯¢å°†åœ¨å…¶é€‰é¡¹å¡/çª—å£å¤„äºåå°æ—¶ç»§ç»­é‡æ–°è·å–\\n  refetchIntervalInBackground: boolean\\n  // é»˜è®¤ä¸º true\\n  // å¦‚æœè®¾ç½®ä¸º trueï¼Œå¦‚æœæ•°æ®è¿‡æ—¶ï¼ŒæŸ¥è¯¢å°†åœ¨æŒ‚è½½æ—¶é‡æ–°è·å–\\n  // å¦‚æœè®¾ç½®ä¸º falseï¼ŒæŸ¥è¯¢å°†ä¸ä¼šåœ¨æŒ‚è½½æ—¶é‡æ–°è·å–\\n  // å¦‚æœè®¾ç½®ä¸º alwaysï¼ŒæŸ¥è¯¢å°†å§‹ç»ˆåœ¨æŒ‚è½½æ—¶é‡æ–°è·å–\\n  // å¦‚æœè®¾ç½®ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å°†ä¸æŸ¥è¯¢ä¸€èµ·æ‰§è¡Œä»¥è®¡ç®—å€¼\\n  refetchOnMount: boolean | \\\"always\\\" | ((query: Query) => boolean | \\\"always\\\")\\n  // é»˜è®¤ä¸º true\\n  // å¦‚æœè®¾ç½®ä¸º trueï¼Œå¦‚æœæ•°æ®é™ˆæ—§ï¼ŒæŸ¥è¯¢å°†é‡æ–°è·å–çª—å£ç„¦ç‚¹\\n  // å¦‚æœè®¾ç½®ä¸º falseï¼ŒæŸ¥è¯¢å°†ä¸ä¼šé‡æ–°è·å–çª—å£ç„¦ç‚¹\\n  // å¦‚æœè®¾ç½®ä¸º alwaysï¼ŒæŸ¥è¯¢å°†å§‹ç»ˆé‡æ–°è·å–çª—å£ç„¦ç‚¹\\n  // å¦‚æœè®¾ç½®ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å°†ä¸æŸ¥è¯¢ä¸€èµ·æ‰§è¡Œä»¥è®¡ç®—å€¼\\n  refetchOnWindowFocus: boolean | \\\"always\\\" | ((query: Query) => boolean | \\\"always\\\")\\n  // é»˜è®¤ä¸º true\\n  // å¦‚æœè®¾ç½®ä¸º trueï¼Œå¦‚æœæ•°æ®è¿‡æ—¶ï¼ŒæŸ¥è¯¢å°†åœ¨é‡æ–°è¿æ¥æ—¶é‡æ–°è·å–\\n  // å¦‚æœè®¾ç½®ä¸º falseï¼ŒæŸ¥è¯¢å°†ä¸ä¼šåœ¨é‡æ–°è¿æ¥æ—¶é‡æ–°è·å–\\n  // å¦‚æœè®¾ç½®ä¸º alwaysï¼ŒæŸ¥è¯¢å°†å§‹ç»ˆé‡æ–°è·å–çª—å£ç„¦ç‚¹\\n  // å¦‚æœè®¾ç½®ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å°†ä¸æŸ¥è¯¢ä¸€èµ·æ‰§è¡Œä»¥è®¡ç®—å€¼\\n  refetchOnReconnect: boolean | \\\"always\\\" | ((query: Query) => boolean | \\\"always\\\")\\n  // å¦‚æœè®¾ç½®ï¼Œç»„ä»¶å°†ä»…åœ¨ä»»ä½•åˆ—å‡ºçš„å±æ€§æ›´æ”¹æ—¶é‡æ–°æ¸²æŸ“\\n  // ä¾‹å¦‚ï¼Œå¦‚æœè®¾ç½®ä¸º ['data', 'error']ï¼Œç»„ä»¶å°†ä»…åœ¨æ•°æ®æˆ–é”™è¯¯å±æ€§æ›´æ”¹æ—¶é‡æ–°å‘ˆç°\\n  // å¦‚æœè®¾ç½®ä¸ºâ€œallâ€ï¼Œç»„ä»¶å°†é€‰æ‹©é€€å‡ºæ™ºèƒ½è·Ÿè¸ªå¹¶åœ¨æ›´æ–°æŸ¥è¯¢æ—¶é‡æ–°å‘ˆç°\\n  // é»˜è®¤æƒ…å†µä¸‹ï¼Œå°†è·Ÿè¸ªå¯¹å±æ€§çš„è®¿é—®ï¼Œå¹¶ä¸”ä»…å½“è·Ÿè¸ªçš„å±æ€§ä¹‹ä¸€å‘ç”Ÿæ›´æ”¹æ—¶ï¼Œç»„ä»¶æ‰ä¼šé‡æ–°å‘ˆç°\\n  notifyOnChangeProps: string[] | \\\"all\\\"\\n  // å¦‚æœè®¾ç½®ï¼Œæ­¤å€¼å°†ç”¨ä½œæŸ¥è¯¢ç¼“å­˜çš„åˆå§‹æ•°æ®ï¼ˆåªè¦å°šæœªåˆ›å»ºæˆ–ç¼“å­˜æŸ¥è¯¢ï¼‰\\n  // å¦‚æœè®¾ç½®ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å°†åœ¨å…±äº«/æ ¹æŸ¥è¯¢åˆå§‹åŒ–æœŸé—´è¢«è°ƒç”¨ä¸€æ¬¡ï¼Œå¹¶æœŸæœ›åŒæ­¥è¿”å› initialData\\n  // é»˜è®¤æƒ…å†µä¸‹ï¼Œåˆå§‹æ•°æ®è¢«è®¤ä¸ºæ˜¯é™ˆæ—§çš„ï¼Œé™¤éè®¾ç½®äº† staleTimeã€‚\\n  // initialData è¢«æŒä¹…åŒ–åˆ°ç¼“å­˜\\n  initialData: TData | () => TData\\n  // å¦‚æœè®¾ç½®ï¼Œè¯¥å€¼å°†ç”¨ä½œä¸Šæ¬¡æ›´æ–° initialData æœ¬èº«çš„æ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚\\n  initialDataUpdatedAt: number | (() => number | undefined)\\n  // å¦‚æœè®¾ç½®ï¼Œå½“æŸ¥è¯¢ä»åœ¨åŠ è½½æ•°æ®ä¸­ä¸”æœªæä¾› initialData æ—¶ï¼Œæ­¤å€¼å°†ç”¨ä½œæ­¤ç‰¹å®šæŸ¥è¯¢è§‚å¯Ÿå™¨çš„å ä½ç¬¦æ•°æ®ã€‚\\n  // `placeholderData` ä¸ä¼šæŒä¹…åŒ–åˆ°ç¼“å­˜\\n  placeholderData: TData | () => TData\\n  // é»˜è®¤ä¸º false å¦‚æœè®¾ç½®ï¼Œåˆ™åœ¨è·å–æ–°æ•°æ®æ—¶å°†ä¿ç•™ä»»ä½•ä»¥å‰çš„æ•°æ®ï¼Œå› ä¸ºæŸ¥è¯¢é”®å·²æ›´æ”¹ã€‚\\n  keepPreviousData: boolean\\n  // é»˜è®¤ä¸º true å¦‚æœè®¾ç½®ä¸º falseï¼Œå°†ç¦ç”¨æŸ¥è¯¢ç»“æœä¹‹é—´çš„ç»“æ„å…±äº«\\n  // å¦‚æœè®¾ç½®ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œæ—§æ•°æ®å€¼å’Œæ–°æ•°æ®å€¼å°†é€šè¿‡è¯¥å‡½æ•°ä¼ é€’ï¼Œè¯¥å‡½æ•°åº”å°†å®ƒä»¬ç»„åˆæˆè§£ææ•°æ®ä»¥ä¾›æŸ¥è¯¢ã€‚ è¿™æ ·ï¼Œæ‚¨å¯ä»¥ä¿ç•™æ—§æ•°æ®çš„å¼•ç”¨ä»¥æé«˜æ€§èƒ½ï¼Œå³ä½¿è¯¥æ•°æ®åŒ…å«ä¸å¯åºåˆ—åŒ–çš„å€¼ä¹Ÿæ˜¯å¦‚æ­¤\\n  structuralSharing: boolean | ((oldData: TData | undefined, newData: TData) => TData)\\n  // é»˜è®¤ä¸ºå…¨å±€æŸ¥è¯¢é…ç½®çš„ useErrorBoundary å€¼ï¼Œæœªå®šä¹‰\\n  // å¦‚æœæ‚¨å¸Œæœ›åœ¨æ¸²æŸ“é˜¶æ®µæŠ›å‡ºé”™è¯¯å¹¶ä¼ æ’­åˆ°æœ€è¿‘çš„é”™è¯¯è¾¹ç•Œï¼Œè¯·å°†æ­¤è®¾ç½®ä¸º true\\n  // å°†æ­¤è®¾ç½®ä¸º false ä»¥ç¦ç”¨ suspense å°†é”™è¯¯æŠ›å‡ºåˆ°é”™è¯¯è¾¹ç•Œçš„é»˜è®¤è¡Œä¸º\\n  // å¦‚æœè®¾ç½®ä¸ºå‡½æ•°ï¼Œå®ƒå°†ä¼ é€’é”™è¯¯å’ŒæŸ¥è¯¢ï¼Œå®ƒåº”è¯¥è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºæ˜¯åœ¨é”™è¯¯è¾¹ç•Œä¸­æ˜¾ç¤ºé”™è¯¯ (true) è¿˜æ˜¯å°†é”™è¯¯ä½œä¸ºçŠ¶æ€è¿”å› (false)\\n  useErrorBoundary: undefined | boolean | (error: TError, query: Query) => boolean\\n  // å¦‚æœè®¾ç½®ï¼Œåˆ™å­˜å‚¨æœ‰å…³æŸ¥è¯¢ç¼“å­˜æ¡ç›®çš„é™„åŠ ä¿¡æ¯ï¼Œå¯æ ¹æ®éœ€è¦ä½¿ç”¨ã€‚ åªè¦æŸ¥è¯¢å¯ç”¨ï¼Œå®ƒå°±å¯ä»¥è®¿é—®ï¼Œå®ƒä¹Ÿæ˜¯æä¾›ç»™ queryFn çš„ QueryFunctionContext çš„ä¸€éƒ¨åˆ†\\n  meta: Record<string, unknown>\\n  // ä½¿ç”¨å®ƒæ¥ä½¿ç”¨è‡ªå®šä¹‰ React æŸ¥è¯¢ä¸Šä¸‹æ–‡ã€‚ å¦åˆ™ï¼Œå°†ä½¿ç”¨ defaultContext\\n  context: React.Context<QueryClient | undefined>\\n});\\n```\\n\\n#### Fetch é€‰é¡¹\\n\\nè¯·æ±‚ `fetch` ç›¸å…³å‚æ•° \\n\\n```js\\nconst { data } = useReactQuery({\\n  /** ç”¨äºè®¾ç½®è¯·æ±‚æ­£æ–‡çš„ BodyInit å¯¹è±¡æˆ– nullã€‚*/\\n  body?: BodyInit | null;\\n  /** ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒæŒ‡ç¤ºè¯·æ±‚å°†å¦‚ä½•ä¸æµè§ˆå™¨çš„ç¼“å­˜äº¤äº’ä»¥è®¾ç½®è¯·æ±‚çš„ç¼“å­˜ã€‚*/\\n  cache?: RequestCache;\\n  /** ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒæŒ‡ç¤ºå‡­æ®æ˜¯å§‹ç»ˆã€ä»ä¸è¿˜æ˜¯ä»…åœ¨å‘é€åˆ°åŒæº URL æ—¶éšè¯·æ±‚ä¸€èµ·å‘é€ã€‚ è®¾ç½®è¯·æ±‚çš„å‡­æ®ã€‚*/\\n  credentials?: RequestCredentials;\\n  /** Headers å¯¹è±¡ã€å¯¹è±¡å­—é¢é‡æˆ–åŒ…å«ä¸¤é¡¹çš„æ•°ç»„ï¼Œç”¨äºè®¾ç½®è¯·æ±‚çš„æ ‡å¤´ã€‚*/\\n  headers?: HeadersInit;\\n  /** è¦æŒ‰è¯·æ±‚è·å–çš„èµ„æºçš„åŠ å¯†å“ˆå¸Œã€‚ è®¾ç½®è¯·æ±‚çš„å®Œæ•´æ€§ã€‚*/\\n  integrity?: string;\\n  /** è®¾ç½®è¯·æ±‚çš„ä¿æ´»çš„å¸ƒå°”å€¼ã€‚*/\\n  keepalive?: boolean;\\n  /** è®¾ç½®è¯·æ±‚æ–¹æ³•çš„å­—ç¬¦ä¸²ã€‚(GET|POST|PUT....)*/\\n  method?: string;\\n  /** ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒæŒ‡ç¤ºè¯·æ±‚æ˜¯ä½¿ç”¨ CORSï¼Œè¿˜æ˜¯ä»…é™äºåŒæº URLã€‚ è®¾ç½®è¯·æ±‚çš„æ¨¡å¼ã€‚*/\\n  mode?: RequestMode;\\n  /** ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒæŒ‡ç¤ºè¯·æ±‚æ˜¯å¦éµå¾ªé‡å®šå‘ã€åœ¨é‡åˆ°é‡å®šå‘æ—¶å¯¼è‡´é”™è¯¯æˆ–è¿”å›é‡å®šå‘ï¼ˆä»¥ä¸é€æ˜çš„æ–¹å¼ï¼‰ã€‚ æ”¾s request's redirect. */\\n  redirect?: RequestRedirect;\\n  /** ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå…¶å€¼ä¸ºåŒæº URLã€â€œabout:clientâ€æˆ–ç©ºå­—ç¬¦ä¸²ï¼Œç”¨äºè®¾ç½®è¯·æ±‚çš„å¼•èæ¥æºç½‘å€ã€‚*/\\n  referrer?: string;\\n  /** è®¾ç½®è¯·æ±‚çš„ referrerPolicy çš„å¼•ç”¨ç­–ç•¥ã€‚*/\\n  referrerPolicy?: ReferrerPolicy;\\n  /** ç”¨äºè®¾ç½®è¯·æ±‚ä¿¡å·çš„ AbortSignalã€‚*/\\n  signal?: AbortSignal | null;\\n  /** åªèƒ½ä¸ºç©ºã€‚ ç”¨äºè§£é™¤æ¥è‡ªä»»ä½•çª—å£çš„è¯·æ±‚ã€‚*/\\n  window?: null;\\n});\\n```\\n\\n### useReactMutation\\n\\nç”¨äºè§¦å‘çš„ `API` è¯·æ±‚\\n\\n```jsx\\nuseReactMutation({\\n  mutationKey: ['user', dataForm],\\n  url: '/api/login'\\n});\\n```\\n<!--rehype:style=background:#00de2247;border: 0;-->\\n\\nğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘† ä¸Šé¢æ˜¯**æ¨è**ä½¿ç”¨ï¼Œ**dataForm** ç”¨äºç»™ `body` ä¼ é€’çš„ *json* æ•°æ® ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†\\n\\n```javascript\\nimport { fetchFn, useReactMutation } from '@kkt/request';\\n\\nuseReactMutation({ mutationKey: ['user'], url: '/api/login' });\\nuseReactMutation({ mutationKey: ['user'], url: '/api/login', method: 'PUT' });\\nuseReactMutation({ mutationKey: ['user', dataForm], url: '/api/login' });\\nuseReactMutation({\\n  mutationKey: ['user', dataForm], \\n  mutationFn: () => fetchFn(`/api/login?id=${dataForm.userId}`, { method: 'PUT' })\\n});\\nuseReactMutation({\\n  mutationKey: ['user', dataForm],\\n  mutationFn: () => fetchFn('/api/login', { method: 'POST', body: JSON.stringify(dataForm) }),\\n});\\nuseReactMutation({\\n  mutationKey: ['user', dataForm],\\n  mutationFn: async () => {\\n    return fetchFn(`/api/login?id=${dataForm.username}`, { method: 'DELETE', body: JSON.stringify(dataForm) });\\n  },\\n});\\nuseReactMutation({\\n  mutationKey: ['user', dataForm],\\n  mutationFn: (data) => {\\n    return fetchFn(`/api/login`, { method: 'POST', body: JSON.stringify(data) })\\n  },\\n});\\n```\\n\\n**ç™»å½•é¡µé¢**ç¤ºä¾‹\\n\\n```javascript\\nimport { useReactMutation, useAuth } from '@kkt/request';\\nimport { useEffect, useState } from 'react';\\nimport { Form, useNavigate, useLocation } from 'react-router-dom';\\n\\nexport default function LoginPage() {\\n  const [errors, setErrors] = useState()\\n  const [submitData, setSubmitData] = useState()\\n  const location = useLocation();\\n  const navigate = useNavigate();\\n  const mutation = useReactMutation({\\n    url: '/api/login',\\n    mutationKey: ['user-login', submitData],\\n  });\\n\\n  useEffect(() => {\\n    sessionStorage.removeItem('token');\\n    // é»˜è®¤è¿›å…¥ç™»å½•é¡µé¢æ¸…ç©º tokenï¼Œé€€å‡ºç™»å½•å³å¯ç›´æ¥è·³è½¬åˆ° `/login` é¡µé¢\\n  }, []);\\n\\n  const submit = async (event) => {\\n    event.preventDefault();\\n    const result = await mutation.mutateAsync(submitData);\\n    if (result.error) {\\n      setErrors({ message: result.error });\\n      return;\\n    }\\n    // å­˜å‚¨ tokenï¼Œé€šè¿‡ sessionStorage æˆ–è€… localStorage\\n    sessionStorage.setItem('token', result.token);\\n    setTimeout(() => {\\n      // è·³è½¬åˆ°ä¸Šä¸€ä¸ªé¡µé¢æˆ–è€… `/`\\n      const from = location.state?.from?.pathname || '/';\\n      navigate(from, { replace: true });\\n    });\\n  };\\n  const handleChange = (event) => {\\n    const formData = new FormData(event.target.form);\\n    const username = formData.get(\\\"username\\\");\\n    const password = formData.get(\\\"password\\\");\\n    const err = {};\\n    // éªŒè¯å­—æ®µ\\n    if (typeof username !== \\\"string\\\" || username.length < 3) {\\n      err.username = \\\"ç”¨æˆ·åå¿…é¡»å¤§äº 3 ä¸ªå­—ç¬¦\\\";\\n    }\\n    if (typeof password !== \\\"string\\\" || password.length < 3) {\\n      err.password = \\\"å¯†ç å¿…é¡»å¤§äº 3 ä¸ªå­—ç¬¦\\\";\\n    }\\n    setErrors({ ...err });\\n    if (!Object.entries(err).length) {\\n      const data = Object.fromEntries(formData)\\n      setSubmitData(data);\\n    }\\n  }\\n  return (\\n    <Form method=\\\"post\\\" onChange={handleChange} onSubmit={submit}>\\n      <label>\\n        <input type=\\\"text\\\" name=\\\"username\\\" />\\n        {errors?.username && <span>{errors.username}</span>}\\n      </label>\\n      <label>\\n        <input type=\\\"text\\\" name=\\\"password\\\" />\\n        {errors?.password && <span>{errors.password}</span>}\\n      </label>\\n      <p>\\n        <button type=\\\"submit\\\">Sign up</button>\\n      </p>\\n      {errors?.message && <div>{errors.message}</div>}\\n    </Form>\\n  );\\n}\\n```\\n\\nåœ¨ä»»ä½•ç»™å®šæ—¶åˆ»ï¼Œ`mutation` åªèƒ½å¤„äºä»¥ä¸‹çŠ¶æ€ä¹‹ä¸€ï¼š\\n\\n- `isIdle` or `status === 'idle'` - mutation å½“å‰å¤„äºç©ºé—²çŠ¶æ€æˆ–å¤„äºæ–°é²œ/é‡ç½®çŠ¶æ€\\n- `isLoading` or `status === 'loading'` - mutation å½“å‰æ­£åœ¨è¿è¡Œ\\n- `isError` or `status === 'error'` - mutation é‡åˆ°é”™è¯¯\\n- `isSuccess` or `status === 'success'` - mutation æˆåŠŸå¹¶ä¸” mutation æ•°æ®å¯ç”¨\\n\\né™¤äº†è¿™äº›ä¸»è¦çŠ¶æ€ä¹‹å¤–ï¼Œè¿˜å¯ä»¥æ ¹æ® `mutation` çŠ¶æ€è·å¾—æ›´å¤šä¿¡æ¯ï¼š\\n\\n- `error` - å¦‚æœ mutation å¤„äºé”™è¯¯çŠ¶æ€ï¼Œåˆ™å¯ä»¥é€šè¿‡ error å±æ€§è·å¾—é”™è¯¯ã€‚\\n- `data` - å¦‚æœ mutation å¤„äºæˆåŠŸçŠ¶æ€ï¼Œåˆ™æ•°æ®å¯é€šè¿‡ data å±æ€§è·å¾—ã€‚\\n\\n```javascript\\nconst mutation = useReactMutation({\\n  url: '/api/login',\\n  mutationKey: ['user-login', data],\\n  method: 'PUT'\\n});\\n```\\n\\n#### å‰¯ä½œç”¨ mutation é€‰é¡¹\\n\\n```js\\nconst mutation = useReactMutation({\\n  url: '/api/login',\\n  onMutate: (variables) => {\\n    // mutation å³å°†å‘ç”Ÿï¼\\n    \\n    // å¯é€‰åœ°è¿”å›åŒ…å«æ•°æ®çš„ä¸Šä¸‹æ–‡ï¼Œä¾‹å¦‚åœ¨å›æ»šæ—¶ä½¿ç”¨\\n    return { id: 1 }\\n  },\\n  onError: (error, variables, context) => {\\n    // å‘ç”Ÿé”™è¯¯ï¼\\n    console.log(`rolling back optimistic update with id ${context.id}`)\\n  },\\n  onSuccess: (data, variables, context) => {\\n    // Boom baby!\\n  },\\n  onSettled: (data, error, variables, context) => {\\n    // é”™è¯¯æˆ–æˆåŠŸ......æ²¡å…³ç³»ï¼\\n  },\\n})\\n```\\n\\næ‚¨å¯èƒ½ä¼šå‘ç°ï¼Œåœ¨è°ƒç”¨ `mutate` æ—¶ï¼Œæ‚¨æƒ³è¦è§¦å‘é™¤ `useReactMutation` ä¸Šå®šä¹‰çš„å›è°ƒä¹‹å¤–çš„å…¶ä»–å›è°ƒã€‚ è¿™å¯ç”¨äºè§¦å‘ç»„ä»¶ç‰¹å®šçš„å‰¯ä½œç”¨ã€‚ ä¸ºæ­¤ï¼Œæ‚¨å¯ä»¥åœ¨ `mutate` å˜é‡ä¹‹åå‘ `mutate` å‡½æ•°æä¾›ä»»ä½•ç›¸åŒçš„å›è°ƒé€‰é¡¹ã€‚ æ”¯æŒçš„é€‰é¡¹åŒ…æ‹¬ï¼š`onSuccess`ã€`onError` å’Œ `onSettled`ã€‚ è¯·è®°ä½ï¼Œå¦‚æœæ‚¨çš„ç»„ä»¶åœ¨å˜æ›´å®Œæˆä¹‹å‰å¸è½½ï¼Œé‚£ä¹ˆè¿™äº›é¢å¤–çš„å›è°ƒå°†ä¸ä¼šè¿è¡Œã€‚\\n\\n```js\\nmutation.mutate(todo, {\\n  onSuccess: (data, variables, context) => {\\n    // I will fire second!\\n  },\\n  onError: (error, variables, context) => {\\n    // I will fire second!\\n  },\\n  onSettled: (data, error, variables, context) => {\\n    // I will fire second!\\n  },\\n})\\n```\\n\\n### Query Keys\\n\\nTanStack Query çš„æ ¸å¿ƒæ˜¯åŸºäºæŸ¥è¯¢é”®ä¸ºæ‚¨ç®¡ç†æŸ¥è¯¢ç¼“å­˜ã€‚æŸ¥è¯¢é”®å¿…é¡»æ˜¯é¡¶å±‚çš„æ•°ç»„ï¼Œå¹¶ä¸”å¯ä»¥åƒå…·æœ‰å•ä¸ªå­—ç¬¦ä¸²çš„æ•°ç»„ä¸€æ ·ç®€å•ï¼Œä¹Ÿå¯ä»¥åƒåŒ…å«è®¸å¤šå­—ç¬¦ä¸²å’ŒåµŒå¥—å¯¹è±¡çš„æ•°ç»„ä¸€æ ·å¤æ‚ã€‚ åªè¦æŸ¥è¯¢é”®æ˜¯å¯åºåˆ—åŒ–çš„ï¼Œå¹¶ä¸”å¯¹äºæŸ¥è¯¢æ•°æ®æ˜¯å”¯ä¸€çš„ï¼Œå°±å¯ä»¥ä½¿ç”¨å®ƒï¼\\n\\n```js\\nuseReactQuery({\\n  url: `https://api.example.com/users?status=${status}&page=${page}`,\\n  queryKey: ['use-list', { status, page }],\\n});\\n```\\n\\n### è¯·æ±‚é‡è¯•\\n\\n```js\\nconst { isLoading, isError, data } = useReactQuery({\\n  url: `/api/user/list?id=${userId}`,\\n  queryKey: ['user-list', userId],\\n  retry: 10, // åœ¨æ˜¾ç¤ºé”™è¯¯ä¹‹å‰å°†é‡è¯•å¤±è´¥çš„è¯·æ±‚ 10 æ¬¡\\n});\\n```\\n\\nä¿®æ”¹ `.anerc.js` é…ç½®ï¼Œæ¯æ¬¡å°è¯•çš„é»˜è®¤ `retryDelay` è®¾ç½®ä¸ºåŒå€ï¼ˆä» `1000` æ¯«ç§’å¼€å§‹ï¼‰ï¼Œä½†ä¸è¶…è¿‡ `30` ç§’ï¼š\\n\\n```js\\n/** @type {import(\\\"anem\\\").ANEMOptions} */\\nexport const anem = {\\n  reactQuery: {\\n    \\\"defaultOptions\\\": {\\n      \\\"queries\\\": {\\n        retryDelay: (attemptIndex) => Math.min(1000 * 2 ** attemptIndex, 30000),\\n      }\\n    }\\n  }\\n}\\n```\\n\\n### è·å–å…¨å±€æ³¨å†Œçš„ QueryClient\\n\\nå…¨å±€ `QueryClient` æ˜¯é»˜è®¤é›†æˆçš„ï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨ `reactQuery=false` å–æ¶ˆæ³¨å†Œï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢æ–¹å¼è·å–å…¨å±€ `queryClient` å¯¹è±¡\\n\\n```javascript\\nimport { queryClient, fetchFn } from '@kkt/request';\\n// Or\\nimport { queryClient, fetchFn } from '@kkt/pro';\\n\\n/** @type {import(\\\"@kkt/request\\\").QueryClient} */\\nconst client = queryClient;\\n```\\n\\n## è·¯ç”± action è¯·æ±‚ç¤ºä¾‹\\n\\nè¿™ä¸ `react-query` æœ‰æ‰€ä¸åŒï¼Œä½¿ç”¨ `action` æˆ–è€… `loader` æ‹¿åˆ°æ•°æ®ï¼Œä¼ é€’ç»™é¡µé¢çš„ `props`ï¼Œè¿™æ˜¯è·¯ç”±([react-router](https://github.com/remix-run/react-router))å¸¦çš„åŠŸèƒ½ï¼Œåœ¨ loader ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨ `react-query`ã€‚\\n\\n```jsx\\nimport { redirect, Form, useParams, useLoaderData, useActionData } from '@kkt/pro';\\n\\nEditPage.action = async ({ params, request }) => {\\n  let formData = await request.formData();\\n  const updates = Object.fromEntries(formData);\\n  await fetch('https://api.github.com/repos/uiwjs/uiw')\\n  await updateContact(params.userId, updates);\\n  let userId = formData.get('userId');\\n  console.log('::ç”¨æˆ·ID:', userId);\\n  // æäº¤è·³è½¬åˆ°æŒ‡å®šé¡µé¢\\n  return redirect(`/team/${params.userId}`);\\n};\\n\\nEditPage.loader = async ({ params }) => {\\n  console.log('::è¿›å…¥é¡µé¢è¯·æ±‚API:', params.userId)\\n  return { username: `ç”¨æˆ·ID: ${params.userId} è·å–æ•°æ®` };\\n};\\n\\nexport default function EditPage() {\\n  let { userId } = useParams();\\n  const data = useLoaderData();\\n  const actionData = useActionData();\\n  console.log('userId', userId, data, actionData);\\n  return (\\n    <div>\\n      ç¼–è¾‘é¡µé¢{userId}\\n      <Form method=\\\"delete\\\">\\n        <input type=\\\"hidden\\\" name=\\\"userId\\\" defaultValue={userId} />\\n        <button type=\\\"submit\\\">Delete Project</button>\\n      </Form>\\n    </div>\\n  );\\n}\\n```\\n\\næ¯å½“åº”ç”¨ç¨‹åºå‘æ‚¨çš„è·¯çº¿å‘é€éè·å–æäº¤ï¼ˆ`post`ã€`put`ã€`patch`ã€`delete`ï¼‰æ—¶ï¼Œéƒ½ä¼šè°ƒç”¨æ“ä½œã€‚ è¿™å¯ä»¥é€šè¿‡å‡ ç§æ–¹å¼å‘ç”Ÿï¼š\\n\\n```jsx\\nEditPage.action = async ({ params, request }) => {\\n  switch (request.method) {\\n    case \\\"PUT\\\": {\\n      let formData = await request.formData();\\n      let name = formData.get(\\\"projectName\\\");\\n      return fakeUpdateProject(name);\\n    }\\n    case \\\"DELETE\\\": {\\n      return fakeDeleteProject(params.id);\\n    }\\n    default: {\\n      throw new Response(\\\"\\\", { status: 405 });\\n    }\\n  }\\n};\\n```\\n\\n### éªŒè¯é˜»æ­¢æäº¤\\n\\n```jsx\\n<Form \\n  method=\\\"delete\\\"\\n  onSubmit={(event) => {\\n    if (!confirm(\\\"è¯·ç¡®è®¤æ‚¨è¦åˆ é™¤æ­¤è®°å½•ã€‚\\\")) {\\n      event.preventDefault();\\n    }\\n  }}\\n>\\n  <input type=\\\"hidden\\\" name=\\\"userId\\\" defaultValue={userId} />\\n  <button type=\\\"submit\\\">Delete Project</button>\\n</Form>\\n```\\n\\n### åœ¨ loader ä¸­ä½¿ç”¨ `react-query`\\n\\n```javascript\\nimport { queryClient, useQuery, fetchFn, useLoaderData } from '@kkt/pro';\\n\\n/** @type {import(\\\"@kkt/request\\\").QueryClient} */\\nconst client = queryClient;\\n\\nExamplePage.loader = async ({ params, request }) => {\\n  const query = () => fetchFn('/api/user/info', { /* fetch é…ç½® */ });\\n  return queryClient.fetchQuery(['user-list'], query).catch((err) => {\\n    // å‡ºå‘é”™è¯¯é¡µé¢\\n    throw new Response(\\\"\\\", {\\n      status: 404,\\n      statusText: err.message,\\n    });\\n  });\\n}\\n\\nexport default function ExamplePage({ contact }) {\\n  const data = useLoaderData();\\n  // ä¹Ÿå¯ä»¥ä½¿ç”¨ useQuery æ‹¿åˆ°ä½ è¦çš„æ•°æ®\\n  const { data: someData } = useQuery(['user-list']);\\n  console.log('someData', someData)\\n  // ....\\n}\\n```\\n\\n### æäº¤è¿‡ç¨‹ä¸å¼•èµ· URL è·³è½¬\\n\\nä½¿ç”¨ `useFetcher` é’©å­å®šä¹‰ä¸€ä¸ª `fetcher.Form` æ ‡ç­¾\\n\\n```jsx\\nimport { useLoaderData, Form, useFetcher } from \\\"@kkt/pro\\\";\\n\\nFavoritePage.action = async ({ params, request }) => {\\n  let formData = await request.formData();\\n  return updateContact(params.contactId, {\\n    favorite: formData.get(\\\"favorite\\\") === \\\"true\\\",\\n  });\\n}\\n\\nexport default function FavoritePage({ contact }) {\\n  const fetcher = useFetcher();\\n  let favorite = contact.favorite;\\n  return (\\n    <fetcher.Form method=\\\"post\\\">\\n      <button name=\\\"favorite\\\" value={favorite ? \\\"false\\\" : \\\"true\\\"}>\\n        {favorite ? \\\"â˜…\\\" : \\\"â˜†\\\"}\\n      </button>\\n    </fetcher.Form>\\n  );\\n}\\n```\\n\\n### è·å– URL å‚æ•°\\n\\n```jsx\\nEditPage.loader = async ({ request }) => {\\n  const url = new URL(request.url);\\n  const q = url.searchParams.get(\\\"q\\\");\\n  return { query: q };\\n};\\nexport default function EditPage() {\\n  const data = useLoaderData();\\n  return (\\n    <div> ç¼–è¾‘é¡µé¢{data.query} </div>\\n  );\\n}\\n```\\n\\n### è·å–è·¯ç”±å‚æ•°\\n\\n```jsx\\nEditPage.loader = async ({ request }) => {\\n  // è·¯ç”±å‚æ•°ï¼š/user/:userId/list\\n  let { userId } = useParams();\\n  return { };\\n};\\n```\\n\\n## æ¯”è¾ƒ | React Query vs SWR vs Apollo vs RTK Query vs React Router\\n\\n|   | React Query | SWR [_(Website)_][swr] | Apollo Client [_(Website)_][apollo] | RTK-Query [_(Website)_][rtk-query]   | React Router [_(Website)_][react-router] |\\n| ----- | ----- | ----- | ----- | ----- | ----- |\\n| Github Repo / Stars                                | [![][stars-react-query]][gh-react-query] | [![][stars-swr]][gh-swr]    | [![][stars-apollo]][gh-apollo]             | [![][stars-rtk-query]][gh-rtk-query] | [![][stars-react-router]][gh-react-router]                                |\\n| å¹³å°è¦æ±‚ | React | React | React, GraphQL | Redux | React |\\n| ä»–ä»¬çš„æ¯”è¾ƒ | | (none) | (none) | [Comparison][rtk-query-comparison]   | [Comparison][react-router-comparison] |\\n| æ”¯æŒçš„æŸ¥è¯¢è¯­æ³• | Promise, REST, GraphQL | Promise, REST, GraphQL | GraphQL, Any (Reactive Variables) | Promise, REST, GraphQL | Promise, REST, GraphQL |\\n| æ”¯æŒçš„æ¡†æ¶ | React | React | React + Others | Any | React |\\n| ç¼“å­˜ç­–ç•¥ | Hierarchical Key -> Value | Unique Key -> Value | Normalized Schema | Unique Key -> Value | Nested Route -> value |\\n| ç¼“å­˜é”®ç­–ç•¥ | JSON | JSON | GraphQL Query | JSON | Route Path |\\n| ç¼“å­˜å˜åŒ–æ£€æµ‹ | Deep Compare Keys (Stable Serialization) | Shallow Compare Keys | Deep Compare Keys (Unstable Serialization) | Key Referential Equality (===) | Route Change |\\n| æ•°æ®å˜åŒ–æ£€æµ‹ | Deep Comparison + Structural Sharing | Deep Compare (via `dequal`) | Deep Compare (Unstable Serialization) | Key Referential Equality (===) | Loader Run |\\n| æ•°æ®è®°å¿† | Full Structural Sharing | Identity (===) | Normalized Identity | Identity (===) | Identity (===) |\\n| æ†ç»‘å°ºå¯¸ | [![][bp-react-query]][bpl-react-query]   | [![][bp-swr]][bpl-swr]      | [![][bp-apollo]][bpl-apollo]               | [![][bp-rtk-query]][bpl-rtk-query]   | [![][bp-react-router]][bpl-react-router]  [![][bp-history]][bpl-history] |\\n| APIå®šä¹‰ä½ç½® | Component, External Config | Component | GraphQL Schema | External Config | Route Tree Configuration |\\n| æŸ¥è¯¢ | âœ… | âœ… | âœ… | âœ… | âœ… |\\n| ç¼“å­˜æŒä¹…åŒ– | âœ… | âœ… | âœ… | âœ… | ğŸ›‘ Active Routes Only <sup>8</sup> |\\n| å¼€å‘è€…å·¥å…· | âœ… | ğŸŸ¡ | âœ… | âœ… | ğŸ›‘ |\\n| è½®è¯¢/é—´éš” | âœ… | âœ… | âœ… | âœ… | ğŸ›‘ |\\n| å¹¶è¡ŒæŸ¥è¯¢ | âœ… | âœ… | âœ… | âœ… | âœ… |\\n| ä¾èµ–æŸ¥è¯¢  | âœ… | âœ… | âœ… | âœ… | âœ… |\\n| åˆ†é¡µæŸ¥è¯¢  | âœ… | âœ… | âœ… | âœ… | âœ… |\\n| æ— é™æŸ¥è¯¢ | âœ… | âœ… | âœ… | ğŸ›‘ | ğŸ›‘ |\\n| åŒå‘æ— é™æŸ¥è¯¢ | âœ… | ğŸ”¶ | ğŸ”¶ | ğŸ›‘ | ğŸ›‘ |\\n| æ— é™æŸ¥è¯¢é‡æ–°è·å– | âœ… | âœ… | ğŸ›‘ | ğŸ›‘ | ğŸ›‘ |\\n| æ»åæŸ¥è¯¢æ•°æ®[^1] | âœ… | ğŸ”¶ | ğŸ›‘ | âœ… | âœ… |\\n| é€‰æ‹©å™¨ | âœ… | ğŸ›‘ | âœ… | âœ… | N/A |\\n| åˆå§‹æ•°æ® | âœ… | âœ… | âœ… | âœ… | âœ… |\\n| æ»šåŠ¨æ¢å¤ | âœ… | âœ… | âœ… | âœ… | âœ… |\\n| ç¼“å­˜æ“ä½œ | âœ… | âœ… | âœ… | âœ… | ğŸ›‘ |\\n| è¿‡æ—¶çš„æŸ¥è¯¢é©³å› | âœ… | âœ… | âœ… | âœ… | âœ… |\\n| æ¸²æŸ“æ‰¹å¤„ç†å’Œä¼˜åŒ–[^2] | âœ… | ğŸ›‘ | ğŸ›‘ | âœ… | âœ… |\\n| è‡ªåŠ¨åƒåœ¾æ”¶é›† | âœ… | ğŸ›‘ | ğŸ›‘ | âœ… | N/A |\\n| mutation é’©å­ | âœ… | ğŸŸ¡ | âœ… | âœ… | âœ… |\\n| ç¦»çº¿çªå˜æ”¯æŒ | âœ… | ğŸ›‘ | ğŸŸ¡ | ğŸ›‘ | ğŸ›‘ |\\n| é¢„å– API | âœ… | ğŸ”¶ | âœ… | âœ… | âœ… |\\n| æŸ¥è¯¢å–æ¶ˆ | âœ… | ğŸ›‘ | ğŸ›‘ | ğŸ›‘ | âœ… |\\n| éƒ¨åˆ†æŸ¥è¯¢åŒ¹é…[^3] | âœ… | ğŸ›‘ | ğŸ›‘ | âœ… | N/A |\\n| é‡æ–°éªŒè¯æ—¶é™ˆæ—§ |âœ… | âœ… | âœ… | âœ… | ğŸ›‘ |\\n| é™ˆæ—§æ—¶é—´é…ç½® | âœ… | ğŸ›‘[^7] | ğŸ›‘ | âœ… | ğŸ›‘ |\\n| ä½¿ç”¨å‰æŸ¥è¯¢/å˜æ›´é…ç½®[^4] | âœ… | ğŸ›‘ | ğŸ›‘ | âœ… | âœ… |\\n| çª—å£ç„¦ç‚¹é‡æ–°è·å– | âœ… | âœ… | ğŸ›‘ | ğŸ”¶ | ğŸ›‘ |\\n| ç½‘ç»œçŠ¶æ€é‡æ–°è·å– | âœ… | âœ… | âœ… | ğŸ”¶ | ğŸ›‘ |\\n| ä¸€èˆ¬ç¼“å­˜è„±æ°´/å†æ°´åŒ– | âœ… | ğŸ›‘ | âœ… | âœ… | âœ… |\\n| ç¦»çº¿ç¼“å­˜ | âœ… (å®éªŒæ€§çš„) | ğŸ›‘ | âœ… | ğŸ”¶ | ğŸ›‘ |\\n| React Suspense(å®éªŒæ€§çš„) | âœ… | âœ… | ğŸ›‘ | ğŸ›‘ | âœ… |\\n| æŠ½è±¡/ä¸å¯çŸ¥æ ¸å¿ƒ | âœ… | ğŸ›‘ | âœ… | âœ… | ğŸ›‘ |\\n| å˜å¼‚åè‡ªåŠ¨é‡æ–°è·å–[^5] | ğŸ”¶ | ğŸ”¶ | âœ… | âœ… | âœ… |\\n| æ ‡å‡†åŒ–ç¼“å­˜[^6] | ğŸ›‘ | ğŸ›‘ | âœ… | ğŸ›‘ | ğŸ›‘ |\\n\\n[bpl-react-query]: https://bundlephobia.com/result?p=react-query\\n[bp-react-query]: https://badgen.net/bundlephobia/minzip/react-query?label=ğŸ’¾\\n[gh-react-query]: https://github.com/tannerlinsley/react-query\\n[stars-react-query]: https://img.shields.io/github/stars/tannerlinsley/react-query?label=%F0%9F%8C%9F\\n\\n[swr]: https://github.com/vercel/swr\\n[bp-swr]: https://badgen.net/bundlephobia/minzip/swr?label=ğŸ’¾\\n[gh-swr]: https://github.com/vercel/swr\\n[stars-swr]: https://img.shields.io/github/stars/vercel/swr?label=%F0%9F%8C%9F\\n[bpl-swr]: https://bundlephobia.com/result?p=swr\\n\\n[apollo]: https://github.com/apollographql/apollo-client\\n[bp-apollo]: https://badgen.net/bundlephobia/minzip/@apollo/client?label=ğŸ’¾\\n[gh-apollo]: https://github.com/apollographql/apollo-client\\n[stars-apollo]: https://img.shields.io/github/stars/apollographql/apollo-client?label=%F0%9F%8C%9F\\n[bpl-apollo]: https://bundlephobia.com/result?p=@apollo/client\\n\\n[rtk-query]: https://redux-toolkit.js.org/rtk-query/overview\\n[rtk-query-comparison]: https://redux-toolkit.js.org/rtk-query/comparison\\n[rtk-query-bundle-size]: https://redux-toolkit.js.org/rtk-query/comparison#bundle-size\\n[bp-rtk]: https://badgen.net/bundlephobia/minzip/@reduxjs/toolkit?label=ğŸ’¾\\n[bp-rtk-query]: https://badgen.net/bundlephobia/minzip/@reduxjs/toolkit?label=ğŸ’¾\\n[gh-rtk-query]: https://github.com/reduxjs/redux-toolkit\\n[stars-rtk-query]: https://img.shields.io/github/stars/reduxjs/redux-toolkit?label=ğŸŒŸ\\n[bpl-rtk]: https://bundlephobia.com/result?p=@reduxjs/toolkit\\n[bpl-rtk-query]: https://bundlephobia.com/package/@reduxjs/toolkit\\n\\n[react-router]: https://github.com/remix-run/react-router\\n[bp-react-router]: https://badgen.net/bundlephobia/minzip/react-router-dom?label=ğŸ’¾\\n[gh-react-router]: https://github.com/remix-run/react-router\\n[stars-react-router]: https://img.shields.io/github/stars/remix-run/react-router?label=%F0%9F%8C%9F\\n[bpl-react-router]: https://bundlephobia.com/result?p=react-router-dom\\n[bp-history]: https://badgen.net/bundlephobia/minzip/history?label=ğŸ’¾\\n[bpl-history]: https://bundlephobia.com/result?p=history\\n\\n[^1]: æ»åæŸ¥è¯¢æ•°æ® â€” React Query æä¾›äº†ä¸€ç§åœ¨åŠ è½½ä¸‹ä¸€ä¸ªæŸ¥è¯¢æ—¶ç»§ç»­æŸ¥çœ‹ç°æœ‰æŸ¥è¯¢æ•°æ®çš„æ–¹æ³•ï¼ˆç±»ä¼¼äº suspense å¾ˆå¿«å°†åœ¨æœ¬åœ°æä¾›çš„ç›¸åŒ UXï¼‰ã€‚ è¿™åœ¨ç¼–å†™åˆ†é¡µ UI æˆ–æ— é™åŠ è½½ UI æ—¶éå¸¸é‡è¦ï¼Œå› ä¸ºæ‚¨ä¸å¸Œæœ›åœ¨è¯·æ±‚æ–°æŸ¥è¯¢æ—¶æ˜¾ç¤ºç¡¬åŠ è½½çŠ¶æ€ã€‚ å…¶ä»–åº“æ²¡æœ‰æ­¤åŠŸèƒ½ï¼Œå¹¶åœ¨æ–°æŸ¥è¯¢åŠ è½½æ—¶ä¸ºæ–°æŸ¥è¯¢å‘ˆç°ç¡¬åŠ è½½çŠ¶æ€ï¼ˆé™¤éå®ƒå·²è¢«é¢„å–ï¼‰ã€‚\\n[^2]: æ¸²æŸ“ä¼˜åŒ– - React Query å…·æœ‰å‡ºè‰²çš„æ¸²æŸ“æ€§èƒ½ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä¼šè‡ªåŠ¨è·Ÿè¸ªè®¿é—®äº†å“ªäº›å­—æ®µï¼Œå¹¶ä¸”ä»…åœ¨å…¶ä¸­ä¸€ä¸ªå­—æ®µå‘ç”Ÿæ›´æ”¹æ—¶æ‰é‡æ–°å‘ˆç°ã€‚ å¦‚æœæ‚¨æƒ³é€‰æ‹©é€€å‡ºæ­¤ä¼˜åŒ–ï¼Œå°† notifyOnChangeProps è®¾ç½®ä¸º 'all' å°†åœ¨æ›´æ–°æŸ¥è¯¢æ—¶é‡æ–°å‘ˆç°æ‚¨çš„ç»„ä»¶ã€‚ ä¾‹å¦‚å› ä¸ºå®ƒæœ‰æ–°æ•°æ®ï¼Œæˆ–è€…è¡¨æ˜å®ƒæ­£åœ¨è·å–ã€‚ React Query è¿˜å°†æ‰¹å¤„ç†æ›´æ–°æ”¾åœ¨ä¸€èµ·ï¼Œä»¥ç¡®ä¿æ‚¨çš„åº”ç”¨ç¨‹åºä»…åœ¨å¤šä¸ªç»„ä»¶ä½¿ç”¨ç›¸åŒæŸ¥è¯¢æ—¶é‡æ–°å‘ˆç°ä¸€æ¬¡ã€‚ å¦‚æœæ‚¨åªå¯¹æ•°æ®æˆ–é”™è¯¯å±æ€§æ„Ÿå…´è¶£ï¼Œåˆ™å¯ä»¥é€šè¿‡å°† notifyOnChangeProps è®¾ç½®ä¸º ['data', 'error'] æ¥è¿›ä¸€æ­¥å‡å°‘æ¸²æŸ“æ¬¡æ•°ã€‚\\n[^3]: éƒ¨åˆ†æŸ¥è¯¢åŒ¹é… â€” å› ä¸º React Query ä½¿ç”¨ç¡®å®šæ€§æŸ¥è¯¢é”®åºåˆ—åŒ–ï¼Œè¿™å…è®¸æ‚¨æ“ä½œå¯å˜çš„æŸ¥è¯¢ç»„ï¼Œè€Œä¸å¿…çŸ¥é“æ‚¨æƒ³è¦åŒ¹é…çš„æ¯ä¸ªå•ç‹¬çš„æŸ¥è¯¢é”®ï¼Œä¾‹å¦‚ã€‚ æ‚¨å¯ä»¥é‡æ–°è·å–å…¶é”®ä¸­ä»¥ todos å¼€å¤´çš„æ¯ä¸ªæŸ¥è¯¢ï¼Œè€Œä¸ç®¡å˜é‡å¦‚ä½•ï¼Œæˆ–è€…æ‚¨å¯ä»¥ä½¿ç”¨ï¼ˆæˆ–ä¸ä½¿ç”¨ï¼‰å˜é‡æˆ–åµŒå¥—å±æ€§æ¥å®šä½ç‰¹å®šæŸ¥è¯¢ï¼Œç”šè‡³å¯ä»¥ä½¿ç”¨è¿‡æ»¤å™¨å‡½æ•°æ¥ä»…åŒ¹é…é€šè¿‡ç‰¹å®šæ¡ä»¶çš„æŸ¥è¯¢ã€‚\\n[^4]: ä½¿ç”¨å‰æŸ¥è¯¢é…ç½® - è¿™åªæ˜¯ä¸€ä¸ªå¥‡ç‰¹çš„åç§°ï¼Œç”¨äºé…ç½®æŸ¥è¯¢å’Œå˜æ›´åœ¨ä½¿ç”¨å‰çš„è¡Œä¸ºæ–¹å¼ã€‚ ä¾‹å¦‚ï¼Œä¸€ä¸ªæŸ¥è¯¢å¯ä»¥é¢„å…ˆå®Œå…¨é…ç½®ä¸ºé»˜è®¤å€¼ï¼Œå½“éœ€è¦ä½¿ç”¨å®ƒæ—¶ï¼Œåªéœ€è¦ `useQuery({ queryKey })` ï¼Œè€Œä¸æ˜¯æ¯æ¬¡ä½¿ç”¨éƒ½éœ€è¦ä¼ é€’ fetcher å’Œ/æˆ–é€‰é¡¹ã€‚ SWR ç¡®å®å…·æœ‰æ­¤åŠŸèƒ½çš„éƒ¨åˆ†å½¢å¼ï¼Œå®ƒå…è®¸æ‚¨é¢„å…ˆé…ç½®ä¸€ä¸ªé»˜è®¤çš„æå–å™¨ï¼Œä½†åªæ˜¯ä½œä¸ºä¸€ä¸ªå…¨å±€æå–å™¨ï¼Œè€Œä¸æ˜¯åŸºäºæ¯ä¸ªæŸ¥è¯¢ï¼Œè€Œä¸”ç»å¯¹ä¸æ˜¯ç”¨äºçªå˜ã€‚\\n[^5]: çªå˜åè‡ªåŠ¨é‡æ–°æå– - ä¸ºäº†åœ¨çªå˜å‘ç”Ÿåå‘ç”ŸçœŸæ­£çš„è‡ªåŠ¨é‡æ–°æå–ï¼Œéœ€è¦ä¸€ä¸ªæ¨¡å¼ï¼ˆå°±åƒ graphQL æä¾›çš„é‚£æ ·ï¼‰ä»¥åŠå¸®åŠ©åº“çŸ¥é“å¦‚ä½•è¯†åˆ«è¯¥æ¨¡å¼ä¸­çš„å•ä¸ªå®ä½“å’Œå®ä½“ç±»å‹çš„å¯å‘å¼æ–¹æ³•ã€‚\\n[^6]: è§„èŒƒåŒ–ç¼“å­˜ â€” React Queryã€SWR å’Œ RTK-Query ç›®å‰ä¸æ”¯æŒè‡ªåŠ¨è§„èŒƒåŒ–ç¼“å­˜ï¼Œå®ƒæè¿°äº†åœ¨å¹³é¢æ¶æ„ä¸­å­˜å‚¨å®ä½“ä»¥é¿å…ä¸€äº›é«˜çº§æ•°æ®é‡å¤ã€‚\\n[^7]: SWR çš„ä¸å¯å˜æ¨¡å¼ â€” SWR é™„å¸¦ä¸€ä¸ªâ€œä¸å¯å˜â€æ¨¡å¼ï¼Œå…è®¸æ‚¨åœ¨ç¼“å­˜çš„ç”Ÿå‘½å‘¨æœŸå†…åªè·å–ä¸€æ¬¡æŸ¥è¯¢ï¼Œä½†å®ƒä»ç„¶æ²¡æœ‰è¿‡æ—¶æˆ–æ¡ä»¶è‡ªåŠ¨é‡æ–°éªŒè¯çš„æ¦‚å¿µ\\n[^8]: React Router ç¼“å­˜æŒä¹…æ€§ - React Router ä¸ä¼šç¼“å­˜è¶…å‡ºå½“å‰åŒ¹é…è·¯ç”±çš„æ•°æ®ã€‚ å¦‚æœç•™ä¸‹ä¸€æ¡è·¯çº¿ï¼Œå…¶æ•°æ®å°†ä¸¢å¤±ã€‚\\n\"\n  }"],"names":["components","data","source"],"sourceRoot":""}